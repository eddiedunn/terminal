{# Ansible managed: {{ ansible_managed }} #}
# Sourced by interactive Zsh shells.

# Source personal aliases if the file exists
if [ -f "$HOME/.zsh_aliases" ]; then . "$HOME/.zsh_aliases"; fi

# Set up completions
if [ -d "$HOME/.zsh/completions" ]; then
  fpath=($HOME/.zsh/completions $fpath)
fi
# '-i' makes compinit ignore insecure files/dirs, which is safer
autoload -Uz compinit && compinit -i

# Explicitly source fzf keybindings if present (Zsh does not auto-source this file)
if [ -f "$HOME/.zsh/completions/fzf-key-bindings.zsh" ]; then
  source "$HOME/.zsh/completions/fzf-key-bindings.zsh"
fi

# Source all tool initializations from other roles
if [ -d "$HOME/.config/shell_init.d" ]; then
  for init_script in "$HOME/.config/shell_init.d/*.zsh"; do
    if [ -f "$init_script" ]; then
      . "$init_script"
    fi
  done
  unset init_script
fi