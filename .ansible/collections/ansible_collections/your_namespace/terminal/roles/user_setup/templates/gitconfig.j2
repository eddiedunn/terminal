{#
  This is a Jinja2 template for .gitconfig, even if currently static.
  It is future-proofed for possible variable substitution.
  All variable references are guarded for safety.
#}
{% if tool is not defined %}{% set tool = {} %}{% endif %}
# Ansible managed: {{ ansible_managed }}
# Git configuration managed by 'terminal_setup' Ansible role

# ===== User Information =====
[user]
    email = {{ git_email | default('your.email@example.com') }}
    name = {{ git_name | default('Your Name') }}

# ===== Core Configuration =====
[core]
    editor = vim
    excludesfile = ~/.gitignore_global
    autocrlf = input
    pager = less -FRSX
    whitespace = fix
    ignorecase = false
    precomposeunicode = true

# ===== Color Settings =====
[color]
    ui = auto
    branch = auto
    diff = auto
    interactive = auto
    status = auto
    showbranch = auto
    grep = auto

# ===== Branch Settings =====
[init]
    defaultBranch = main

# ===== Push/Pull Behavior =====
[push]
    default = simple
    autoSetupRemote = true

[pull]
    rebase = true
    ff = only

# ===== Merge Settings =====
[merge]
    conflictstyle = diff3
    tool = vimdiff
    ff = false

[mergetool]
    prompt = false
    keepBackup = false

# ===== Tool-Specific Configuration =====
{% for tool in terminal_setup_tools_processed %}
{%- if tool.gitconfig is defined %}
# {{ tool.name | title }} Git Configuration
{{ tool.gitconfig | indent(0) }}
{%- endif %}
{%- endfor %}

[difftool]
    prompt = false

# ===== Alias Definitions =====
[alias]
    # Basic shortcuts
    c = commit
    ca = commit -a
    cm = commit -m
    cam = commit -am
    d = diff
    dc = diff --cached
    s = status -sb
    co = checkout
    b = branch
    
    # Log formatting
    l = log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit
    #ll = log --pretty=format:"%C(yellow)%h%Cred%d\ %Creset%s%Cblue\ [%cn]" --decorate --numstat
    lg = log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit --date=relative
    
    # Branch operations
    br = branch
    brv = branch -v
    brvv = branch -vv
    
    # Stash operations
    st = status
    sts = stash --include-untracked
    stl = stash list
    sta = stash apply
    std = stash drop
    
    # Working directory
    wip = !git add -A && git commit -m "WIP"
    unwip = !git log -n 1 | grep -q -c "WIP" && git reset HEAD~1
    
    # Undo operations
    undo = reset --soft HEAD^
    amend = commit --amend --no-edit
    
    # Cleanup
    #cleanup = !git branch --merged | grep -v '\*\|main\|master\|develop' | xargs -n 1 git branch -d

# ===== Platform-Specific Overrides =====
# Add platform-specific overrides here if needed

# ===== User Customization =====
# Add your custom git settings below this line
# They will be preserved across role updates
